# Copilot Instructions for SambaNas2

## Project Overview
SambaNas2 is the next-generation Samba NAS add-on for Home Assistant, representing a complete rewrite with improved performance and features.

## Documentation Update Requirements

### When making ANY change to sambanas2, you MUST update:

1. **README.md** - If changes affect:
   - Installation process
   - Features or capabilities
   - System requirements
   - User-facing functionality

2. **DOCS.md** - If changes affect:
   - Configuration options
   - Usage instructions
   - Service behavior
   - Examples or tutorials

3. **CHANGELOG.md** - For ALL changes:
   - Version information
   - Date of changes
   - Detailed description of modifications
   - Breaking changes highlighted
   - Migration notes if needed

### Current Focus Areas (Active Development)

- **WSDD2 Integration**: Document all WSDD2 service configuration options
- **S6 Overlay Services**: Keep service documentation current
- **Configuration Management**: Update all config.yaml changes
- **Performance Improvements**: Document any performance-related changes
- **Migration from SambaNas**: Include migration guidance when relevant

### Specific Documentation Guidelines

#### For Configuration Changes:
- Update `config.yaml` descriptions in DOCS.md
- Include examples for new options
- Document default values
- Explain impact of configuration changes

#### For Service Changes:
- Document new or modified S6 services
- Update service dependencies
- Include logging configuration changes
- Document service startup/shutdown behavior

#### For Feature Additions:
- Update feature list in README.md
- Add configuration examples in DOCS.md
- Include troubleshooting information
- Update installation requirements if needed

### Key Documentation Sections to Maintain:

#### README.md Structure:
- Title with logo
- Brief description
- Installation badges
- Feature highlights
- Basic installation instructions
- Support information

#### DOCS.md Structure:
- Installation instructions
- Configuration reference
- Service configuration
- Advanced features
- Troubleshooting
- Migration guide

#### CHANGELOG.md Structure:
- Version headers
- Release dates
- Added/Changed/Fixed/Removed sections
- Breaking changes notes
- Migration instructions

### Code-to-Documentation Mapping:

| Code Change | Documentation Update Required |
|-------------|------------------------------|
| `config.yaml` modifications | DOCS.md configuration section |
| S6 service scripts (`rootfs/etc/s6-overlay/s6-rc.d/`) | DOCS.md service section |
| Dockerfile changes | README.md requirements |
| New features | README.md + DOCS.md |
| Bug fixes | CHANGELOG.md |
| Performance improvements | README.md + CHANGELOG.md |
| Security updates | CHANGELOG.md + README.md |

### Quality Checklist:

Before completing any change:
- [ ] Affected documentation files updated
- [ ] Examples tested and working
- [ ] Version information consistent
- [ ] No references to other projects (sambanas, plex, etc.)
- [ ] Migration notes included if breaking changes
- [ ] Installation instructions verified
- [ ] Configuration examples validated

### Forbidden Practices:
- ❌ Copying documentation from sambanas (original)
- ❌ Generic documentation that doesn't match features
- ❌ Outdated examples or configuration
- ❌ Cross-references to other add-ons
- ❌ Missing CHANGELOG entries for changes
